var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ProximiioContextType",{enumerable:true,get:function get(){return _types.ProximiioContextType;}});Object.defineProperty(exports,"ProximiioInitState",{enumerable:true,get:function get(){return _types.ProximiioInitState;}});Object.defineProperty(exports,"ProximiioFloor",{enumerable:true,get:function get(){return _types.ProximiioFloor;}});Object.defineProperty(exports,"ProximiioGeofence",{enumerable:true,get:function get(){return _types.ProximiioGeofence;}});Object.defineProperty(exports,"ProximiioDepartment",{enumerable:true,get:function get(){return _types.ProximiioDepartment;}});Object.defineProperty(exports,"ProximiioPlace",{enumerable:true,get:function get(){return _types.ProximiioPlace;}});Object.defineProperty(exports,"ProximiioLocation",{enumerable:true,get:function get(){return _types.ProximiioLocation;}});exports.ProximiioContextProvider=exports.ProximiioContext=exports.default=exports.Proximiio=exports.ProximiioEvents=exports.NativeAccuracy=exports.NotificationMode=exports.BufferSize=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _types=require("./types");var _this3=this,_jsxFileName="/home/matej/Documents/proximi/react-native-proximiio/src/index.tsx";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var ProximiioNative=_reactNative.NativeModules.ProximiioNative;var BufferSize;exports.BufferSize=BufferSize;(function(BufferSize){BufferSize[BufferSize["MINI"]=0]="MINI";BufferSize[BufferSize["SMALL"]=1]="SMALL";BufferSize[BufferSize["MEDIUM"]=2]="MEDIUM";BufferSize[BufferSize["LARGE"]=3]="LARGE";BufferSize[BufferSize["XLARGE"]=4]="XLARGE";})(BufferSize||(exports.BufferSize=BufferSize={}));var NotificationMode;exports.NotificationMode=NotificationMode;(function(NotificationMode){NotificationMode[NotificationMode["Disabled"]=0]="Disabled";NotificationMode[NotificationMode["Enabled"]=1]="Enabled";NotificationMode[NotificationMode["Required"]=2]="Required";})(NotificationMode||(exports.NotificationMode=NotificationMode={}));var NativeAccuracy;exports.NativeAccuracy=NativeAccuracy;(function(NativeAccuracy){NativeAccuracy[NativeAccuracy["Cellular"]=1]="Cellular";NativeAccuracy[NativeAccuracy["WIFI"]=2]="WIFI";NativeAccuracy[NativeAccuracy["GPS"]=3]="GPS";NativeAccuracy[NativeAccuracy["Navigation"]=4]="Navigation";})(NativeAccuracy||(exports.NativeAccuracy=NativeAccuracy={}));var ProximiioEvents;exports.ProximiioEvents=ProximiioEvents;(function(ProximiioEvents){ProximiioEvents["Initialized"]="ProximiioInitialized";ProximiioEvents["PositionUpdated"]="ProximiioPositionUpdated";ProximiioEvents["FloorChanged"]="ProximiioFloorChanged";ProximiioEvents["EnteredGeofence"]="ProximiioEnteredGeofence";ProximiioEvents["ExitedGeofence"]="ProximiioExitedGeofence";ProximiioEvents["EnteredPrivacyZone"]="ProximiioEnteredPrivacyZone";ProximiioEvents["ExitedPrivacyZone"]="ProximiioExitedPrivacyZone";ProximiioEvents["FoundIBeacon"]="ProximiioFoundIBeacon";ProximiioEvents["UpdatedIBeacon"]="ProximiioUpdatedIBeacon";ProximiioEvents["LostIBeacon"]="ProximiioLostIBeacon";ProximiioEvents["FoundEddystoneBeacon"]="ProximiioFoundEddystoneBeacon";ProximiioEvents["UpdatedEddystoneBeacon"]="ProximiioUpdatedEddystoneBeacon";ProximiioEvents["LostEddystoneBeacon"]="ProximiioLostEddystoneBeacon";ProximiioEvents["ItemsChanged"]="ProximiioItemsChanged";})(ProximiioEvents||(exports.ProximiioEvents=ProximiioEvents={}));var Proximiio=function(){function Proximiio(){var _this=this;(0,_classCallCheck2.default)(this,Proximiio);(0,_defineProperty2.default)(this,"emitter",new _reactNative.NativeEventEmitter(ProximiioNative));(0,_defineProperty2.default)(this,"state",{ready:true,visitorId:''});(0,_defineProperty2.default)(this,"location",void 0);(0,_defineProperty2.default)(this,"floor",void 0);(0,_defineProperty2.default)(this,"level",0);(0,_defineProperty2.default)(this,"getContext",function(){var _this$floor;return{location:_this.location,floor:_this.floor,level:(_this$floor=_this.floor)===null||_this$floor===void 0?void 0:_this$floor.level};});this.authorize=this.authorize.bind(this);this.getContext=this.getContext.bind(this);this.subscribe=this.subscribe.bind(this);this.unsubscribe=this.unsubscribe.bind(this);}(0,_createClass2.default)(Proximiio,[{key:"isAuthorized",value:function isAuthorized(){return this.state.visitorId.length>0;}},{key:"authorize",value:function authorize(token){var _this2=this;var state;return _regenerator.default.async(function authorize$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator.default.awrap(ProximiioNative.authWithToken(token));case 2:state=_context.sent;this.state.ready=true;this.state.visitorId=state.visitorId;this.subscribe(ProximiioEvents.PositionUpdated,function(location){_this2.location=location;});this.subscribe(ProximiioEvents.FloorChanged,function(floor){_this2.floor=floor;_this2.level=floor.level;});return _context.abrupt("return",state);case 8:case"end":return _context.stop();}}},null,this,null,Promise);}},{key:"currentFloor",value:function currentFloor(){return _regenerator.default.async(function currentFloor$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regenerator.default.awrap(ProximiioNative.currentFloor());case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop();}}},null,null,null,Promise);}},{key:"currentGeofences",value:function currentGeofences(){return _regenerator.default.async(function currentGeofences$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regenerator.default.awrap(ProximiioNative.currentGeofences());case 2:return _context3.abrupt("return",_context3.sent);case 3:case"end":return _context3.stop();}}},null,null,null,Promise);}},{key:"departments",value:function departments(){return ProximiioNative.getDepartments();}},{key:"getDepartment",value:function getDepartment(id){return ProximiioNative.getDepartment(id);}},{key:"getFloor",value:function getFloor(id){return ProximiioNative.getFloor(id);}},{key:"floors",value:function floors(){return ProximiioNative.getFloors();}},{key:"getGeofence",value:function getGeofence(id){return ProximiioNative.getGeofence(id);}},{key:"geofences",value:function geofences(){return ProximiioNative.getGeofences();}},{key:"getPlace",value:function getPlace(id){return ProximiioNative.getPlace(id);}},{key:"places",value:function places(){return ProximiioNative.getPlaces();}},{key:"setBufferSize",value:function setBufferSize(buffer){if(_reactNative.Platform.OS==='ios'){ProximiioNative.setBufferSize(buffer);}}},{key:"requestPermissions",value:function requestPermissions(){if(_reactNative.Platform.OS==='ios'){ProximiioNative.requestPermissions(false);}}},{key:"onPermissionResult",value:function onPermissionResult(granted){if(_reactNative.Platform.OS==='android'){ProximiioNative.onPermissionResult(granted?1:0);}}},{key:"enable",value:function enable(){ProximiioNative.enable();}},{key:"disable",value:function disable(){ProximiioNative.disable();}},{key:"subscribe",value:function subscribe(event,fn){return this.emitter.addListener(event,fn);}},{key:"unsubscribe",value:function unsubscribe(event,fn){return this.emitter.removeListener(event,fn);}},{key:"setNotificationMode",value:function setNotificationMode(mode){if(_reactNative.Platform.OS==='android'){ProximiioNative.setNotificationMode(mode);}}},{key:"setNotificationTitle",value:function setNotificationTitle(title){if(_reactNative.Platform.OS==='android'){ProximiioNative.setNotificationTitle(title);}}},{key:"setNotificationText",value:function setNotificationText(text){if(_reactNative.Platform.OS==='android'){ProximiioNative.setNotificationText(text);}}},{key:"setNotificationIcon",value:function setNotificationIcon(icon){if(_reactNative.Platform.OS==='android'){ProximiioNative.setNotificationIcon(icon);}}},{key:"setPdr",value:function setPdr(enabled,pdrCorrectionThreshold){ProximiioNative.setPdr(enabled,pdrCorrectionThreshold);}},{key:"setSnapToRoute",value:function setSnapToRoute(enabled,pdrCorrectionThreshold){ProximiioNative.setSnapToRoute(enabled,pdrCorrectionThreshold);}},{key:"updateOptions",value:function updateOptions(){if(_reactNative.Platform.OS==='android'){ProximiioNative.updateOptions();}}},{key:"setNativeAccuracy",value:function setNativeAccuracy(accuracy){ProximiioNative.setNativeAccuracy(accuracy);}},{key:"destroy",value:function destroy(erase){if(_reactNative.Platform.OS==='android'){ProximiioNative.destroy(erase);}else{ProximiioNative.destroy();}}}]);return Proximiio;}();exports.Proximiio=Proximiio;var instance=new Proximiio();var _default=instance;exports.default=_default;var ProximiioContext=_react.default.createContext(instance.getContext());exports.ProximiioContext=ProximiioContext;var ProximiioContextProvider=function ProximiioContextProvider(_ref){var children=_ref.children;var _useState=(0,_react.useState)({}),_useState2=(0,_slicedToArray2.default)(_useState,2),context=_useState2[0],setContext=_useState2[1];(0,_react.useEffect)(function(){var contextSetter=function contextSetter(){setContext(instance.getContext());};instance.subscribe(ProximiioEvents.PositionUpdated,contextSetter);instance.subscribe(ProximiioEvents.FloorChanged,contextSetter);return function(){instance.unsubscribe(ProximiioEvents.PositionUpdated,contextSetter);instance.unsubscribe(ProximiioEvents.FloorChanged,contextSetter);};},[]);return _react.default.createElement(ProximiioContext.Provider,{value:context,__self:_this3,__source:{fileName:_jsxFileName,lineNumber:261,columnNumber:5}},children);};exports.ProximiioContextProvider=ProximiioContextProvider;
//# sourceMappingURL=index.js.map